---
title: 轉接器模式
date: 2022-04-21 20:58
modified: 2022-04-21 20:58
tags: 標籤
category: 後端程式
slug: 自定義URL標籤
summary: 預覽標題
image: /images/default_preview_image.jpg
status: draft
---

[TOC]

參考書上的 3.1.4 開始說明

## 什麼是『轉接器模式』

所謂的轉接器模式(Adapter)是一種結構型設計模式。這類型的模式所探討的是如何將類別與物件組合成一個更大型的結構;
其中類似架構包含：合成模式、裝飾者模式、前臺模式（或外觀模式）、代理模式
而轉接器模式就是，可以將介面轉換為符合用戶端所需要的樣貌，以便讓原本彼此不相容的類別之前可以相互配合運作。

```c
    public class AspNetUserContextAdapter : IUserContext
    {
        private static readonly HttpContextAccessor Accessor = new HttpContextAccessor();

        public bool IsInRole(Role role)
        {
            return Accessor.HttpContext.User.IsInRole(role.ToString());
        }
    }
```


![[轉接器UML.jpg]]

在這份範例中，基於IUserContext 抽象介面所實作的AspNetUserContextAdapter 轉換器，擔負起用戶端呼叫的轉換

在這份範例，以我自己的觀點，AspNetUserContextAdapter這個轉接器裡面，用了 new HttpContextAccessor 由微軟實作的Http Request物件，然後透過Adapter，轉換了IsInRole的方法，只是這個轉換的方法很簡單沒什麼邏輯，而且也是防止用戶端直接依賴於 HttpContext