---
title: DI 反模式
date: 2022-04-13 13:56
modified: 2022-04-13 13:56
tags: 標籤
category: 後端程式
slug: 自定義URL標籤
summary: 預覽標題
image: /images/default_preview_image.jpg
status: draft
---

[TOC]

定義：所謂『反模式』指的是某種問題上，常見會被提出的一種解決方案。即使以有其他可採行的方案被證實更有效，但還是常會看到這種明顯帶有負面效應的解決方案被提出並採用。


## DI反模式

| 反模式     | 說明                                                         |
| ---------- | ------------------------------------------------------------ |
| 控制狂     | 與控制反轉不同，直接控制了依賴關係                           |
| 服務定位   | 表面上被認爲是可以提供使用方依賴對象的服務，但卻無法保證周全 |
| 環境物件   | 以靜態存取的方式對外提供單一依賴對象                         |
| 限制性建構 | 在依賴關係中，建構子的識別定義被當作特定條件的狀況           |


以下是幾個常見的DI反模式：

1.  Service Locator模式：

Service Locator模式是一種類似於全局變數的做法，它提供了一個中央位置來存儲所有的依賴關係，這樣使用者就可以在需要的時候從中心位置中檢索它們。這種做法雖然可以避免在每個類別中都注入相同的依賴物件，但它會使代碼的複雜性增加，而且可能會導致代碼難以理解和測試。

2.  控制反轉容器濫用：

DI容器是一種用於自動化依賴注入的工具，但如果使用不當，它也可能會成為一個反模式。濫用DI容器可能會導致代碼中出現過多的配置和組態，從而降低了代碼的可讀性和可維護性。此外，使用DI容器還可能導致不必要的性能問題，因為DI容器通常需要額外的配置和初始化時間。

3.  傳遞大量的依賴關係：

在一些情況下，類別可能需要大量的依賴關係才能正確地運作。如果這些依賴關係是通過建構子注入的方式注入的，則可能會導致代碼變得冗長和難以理解。為了解決這個問題，有些人可能會使用屬性注入的方式，將依賴關係拆分為多個屬性。然而，這種做法會降低代碼的可測試性和可維護性，因為它可能會導致類別中出現太多的屬性和方法，從而難以理解和測試。